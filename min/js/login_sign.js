function showLoginBox(){console.log("showLoginBox");var e=$("body").height(),t=$("body").width();$("#cover_layer").css({height:e,width:t,display:"block"}),$("#login_box").show()}function showRegisterBox(){var e=$("body").height(),t=$("body").width();$("#cover_layer").css({height:e,width:t,display:"block"}),$("#register_box").show()}function closeSignbox(){setElementStatus("alert_box","none"),$("#login_box input").val(""),$("#register_box input").val(""),$("#login_box").hide(),$("#register_box").hide(),$("#cover_layer").css({height:0,width:0,display:"block"})}function login(){var e=$("#login_box .ipt_user").val(),t=$("#login_box .ipt_pw").val();0==validInformation(e,"昵称")?document.getElementsByName("username")[0].focus():0==validInformation(t,"密码")?document.getElementsByName("password")[0].focus():(requestdata='{"username" : "'+e+'","password" : "'+t+'"}',console.log("login = "+requestdata),$.ajax({type:"POST",contentType:"application/json",url:"http://www.campuslive.cn:8080/pass/login",processData:!1,dataType:"json",data:requestdata,success:function(e){console.log("data.code = "+e.code),console.log(e.uid+" login in Success!"),"200"==e.code?(setElementStatus("alert_box","none"),$("#login_box input").val(""),$("#cover_layer,#login_box").hide(),$("#login_area a").hide(),$("#login_img,#welcome,#logout").show()):"6031"==e.code?(setElementStatus("alert_box","block"),setElementHtml("alert_text","用户不存在!")):"6022"==e.code?(setElementStatus("alert_box","block"),setElementHtml("alert_text","用户密码错误!")):"6021"==e.code?(setElementStatus("alert_box","block"),setElementHtml("alert_text","用户邮箱不存在!")):(setElementStatus("alert_box","block"),setElementHtml("alert_text","登陆失败!"))},error:function(){console.log("Connect to server Error...")}}))}function register(){var e=$("#register_box .ipt_user").val(),t=$("#register_box .ipt_em").val(),o=$("#register_box .ipt_pw:eq(0)").val(),s=$("input[name='con_password']").val();0==validInformation(e,"昵称")?document.getElementsByName("username")[0].focus():0==validInformation(t,"邮箱")?document.getElementsByName("Email")[0].focus():0==validInformation(o,"密码")?document.getElementsByName("password")[0].focus():o!=s?(setElementStatus("alert_box","block"),setElementHtml("alert_text","密码输入不一致"),document.getElementsByName("con_password")[0].focus()):(requestdata='{"username" : "'+e+'","password" : "'+o+'"}',console.log("sign = "+requestdata),$.ajax({type:"POST",contentType:"application/json",url:"http://www.campuslive.cn:8080/pass/sign",processData:!1,dataType:"json",data:requestdata,success:function(e){console.log(e.username+" Sign up Success!"),"200"==e.code?(setElementStatus("alert_box","none"),$("#register_box input").val(""),$("#cover_layer,#register_box").hide(),$("#register_success").show(),setTimeout(function(){$("#register_success").hide()},1e3)):"601"==e.code?(setElementStatus("alert_box","block"),setElementHtml("alert_text","注册失败!")):"6011"==e.code&&(setElementStatus("alert_box","block"),setElementHtml("alert_text","用户已存在!"))},error:function(){console.log("Connect to server Error...")}}))}function loginOut(){$.ajax({type:"POST",contentType:"application/json",url:"http://localhost:80/pass/logout",processData:!1,dataType:"json",success:function(e){console.log(" Sign out Success!")},error:function(){console.log("Connect to server Error...")}}),$("#login_area a").show(),$("#login_img,#welcome,#logout").hide()}function validInformation(e,t){return void 0==e||null==e||""==e?(setElementStatus("alert_box","block"),setElementHtml("alert_text",t+"必须填写！"),!1):"邮箱"==t&&0==checkEmail(e)?(setElementStatus("alert_box","block"),setElementHtml("alert_text",t+"格式错误！"),!1):"密码"!=t||0!=checkPassword(e)||(setElementStatus("alert_box","block"),setElementHtml("alert_text",t+"格式错误！长度6到20，有字母，数字，点，下划线组成"),!1)}function setElementStatus(e,t){console.log("state"+t),$("."+e).css("display",t)}function setElementHtml(e,t){$("."+e).html(t)}function checkEmail(e){return/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/.test(e)}function checkPassword(e){return!!/^[a-zA-Z]{1}([a-zA-Z0-9]|[._]){5,19}$/.test(e)}var requestdata,uid;